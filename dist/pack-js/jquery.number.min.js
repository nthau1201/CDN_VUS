(d=>{function p(e,t){var a;this.createTextRange?((a=this.createTextRange()).collapse(!0),a.moveStart("character",e),a.moveEnd("character",t-e),a.select()):this.setSelectionRange&&(this.focus(),this.setSelectionRange(e,t))}function g(e){var t,a,i=this.value.length;return e="start"==e.toLowerCase()?"Start":"End",document.selection?((a=(t=document.selection.createRange()).duplicate()).expand("textedit"),a.setEndPoint("EndToEnd",t),t=(a=a.text.length-t.text.length)+t.text.length,"Start"==e?a:t):void 0!==this["selection"+e]?this["selection"+e]:i}var f={codes:{46:127,188:44,109:45,190:46,191:47,192:96,220:92,222:39,221:93,219:91,173:45,187:61,186:59,189:45,110:46},shifts:{96:"~",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",48:")",45:"_",61:"+",91:"{",93:"}",92:"|",59:":",39:'"',44:"<",46:">",47:"?"}},a=(d.fn.number=function(e,o,c,v){v=void 0===v?",":v,o=void 0===o?0:o;var t="\\u"+("0000"+(c=void 0===c?".":c).charCodeAt(0).toString(16)).slice(-4),a=new RegExp("[^"+t+"0-9]","g"),i=new RegExp(t,"g");return!0===e?this.is("input:text")?this.on({"keydown.format":function(e){var t,a=d(this),i=a.data("numFormat"),n=e.keyCode||e.which,l="",s=g.apply(this,["start"]),h=g.apply(this,["end"]),r="",u=!1;if(f.codes.hasOwnProperty(n)&&(n=f.codes[n]),!e.shiftKey&&65<=n&&n<=90?n+=32:!e.shiftKey&&69<=n&&n<=105?n-=48:e.shiftKey&&f.shifts.hasOwnProperty(n)&&(l=f.shifts[n]),""==l&&(l=String.fromCharCode(n)),8!=n&&45!=n&&127!=n&&l!=c&&!l.match(/[0-9]/))return 46==(t=e.keyCode||e.which)||8==t||127==t||9==t||27==t||13==t||(65==t||82==t||80==t||83==t||70==t||72==t||66==t||74==t||84==t||90==t||61==t||173==t||48==t)&&!0===(e.ctrlKey||e.metaKey)||(86==t||67==t||88==t)&&!0===(e.ctrlKey||e.metaKey)||35<=t&&t<=39||112<=t&&t<=123?void 0:(e.preventDefault(),!1);if(0==s&&h==this.value.length?8==n?(s=h=1,this.value="",i.init=0<o?-1:0,i.c=0<o?-(o+1):0,p.apply(this,[0,0])):l==c?(s=h=1,this.value="0"+c+new Array(o+1).join("0"),i.init=0<o?1:0,i.c=0<o?-(o+1):0):45==n?(s=h=2,this.value="-0"+c+new Array(o+1).join("0"),i.init=0<o?1:0,i.c=0<o?-(o+1):0,p.apply(this,[2,2])):(i.init=0<o?-1:0,i.c=0<o?-o:0):i.c=h-this.value.length,i.isPartialSelection=s!=h,0<o&&l==c&&s==this.value.length-o-1)i.c++,i.init=Math.max(0,i.init),e.preventDefault(),u=this.value.length+i.c;else if(45!=n||0==s&&0!=this.value.indexOf("-"))if(l==c)i.init=Math.max(0,i.init),e.preventDefault();else if(0<o&&127==n&&s==this.value.length-o-1)e.preventDefault();else if(0<o&&8==n&&s==this.value.length-o)e.preventDefault(),i.c--,u=this.value.length+i.c;else if(0<o&&127==n&&s>this.value.length-o-1){if(""===this.value)return;"0"!=this.value.slice(s,s+1)&&(r=this.value.slice(0,s)+"0"+this.value.slice(s+1),a.val(r)),e.preventDefault(),u=this.value.length+i.c}else if(0<o&&8==n&&s>this.value.length-o){if(""===this.value)return;"0"!=this.value.slice(s-1,s)&&(r=this.value.slice(0,s-1)+"0"+this.value.slice(s),a.val(r)),e.preventDefault(),i.c--,u=this.value.length+i.c}else 127==n&&this.value.slice(s,s+1)==v?e.preventDefault():8==n&&this.value.slice(s-1,s)==v?(e.preventDefault(),i.c--,u=this.value.length+i.c):0<o&&s==h&&this.value.length>o+1&&s>this.value.length-o-1&&isFinite(+l)&&!e.metaKey&&!e.ctrlKey&&!e.altKey&&1===l.length&&(r=h===this.value.length?this.value.slice(0,s-1):this.value.slice(0,s)+this.value.slice(s+1),this.value=r,u=s);else e.preventDefault();!1!==u&&p.apply(this,[u,u]),a.data("numFormat",i)},"keyup.format":function(e){var t,a=d(this),i=a.data("numFormat"),e=e.keyCode||e.which,n=g.apply(this,["start"]),l=g.apply(this,["end"]);0!==n||0!==l||189!==e&&109!==e||(a.val("-"+a.val()),i.c=(n=1)-this.value.length,i.init=1,a.data("numFormat",i),t=this.value.length+i.c,p.apply(this,[t,t])),""===this.value||(e<48||57<e)&&(e<96||105<e)&&8!==e&&46!==e&&110!==e||(a.val(a.val()),0<o&&(i.init<1?(n=this.value.length-o-(i.init<0?1:0),i.c=n-this.value.length,i.init=1,a.data("numFormat",i)):n>this.value.length-o&&8!=e&&(i.c++,a.data("numFormat",i))),46!=e||i.isPartialSelection||(i.c++,a.data("numFormat",i)),t=this.value.length+i.c,p.apply(this,[t,t]))},"paste.format":function(e){var t=d(this),a=e.originalEvent,i=null;return window.clipboardData&&window.clipboardData.getData?i=window.clipboardData.getData("Text"):a.clipboardData&&a.clipboardData.getData&&(i=a.clipboardData.getData("text/plain")),t.val(i),e.preventDefault(),!1}}).each(function(){var e=d(this).data("numFormat",{c:-(o+1),decimals:o,thousands_sep:v,dec_point:c,regex_dec_num:a,regex_dec:i,init:!!this.value.indexOf(".")});""!==this.value&&e.val(e.val())}):this.each(function(){var e=d(this),t=+e.text().replace(a,"").replace(i,".");e.number(isFinite(t)?t:0,o,c,v)}):this.text(d.number.apply(window,arguments))},null),i=null;d.isPlainObject(d.valHooks.text)?(d.isFunction(d.valHooks.text.get)&&(a=d.valHooks.text.get),d.isFunction(d.valHooks.text.set)&&(i=d.valHooks.text.set)):d.valHooks.text={},d.valHooks.text.get=function(e){var t=d(e).data("numFormat");return t?""===e.value?"":(t=+e.value.replace(t.regex_dec_num,"").replace(t.regex_dec,"."),(0===e.value.indexOf("-")?"-":"")+(isFinite(t)?t:0)):d.isFunction(a)?a(e):void 0},d.valHooks.text.set=function(e,t){var a=d(e).data("numFormat");return a?(a=d.number(t,a.decimals,a.dec_point,a.thousands_sep),d.isFunction(i)?i(e,a):e.value=a):d.isFunction(i)?i(e,t):void 0},d.number=function(e,t,a,i){i=void 0===i?"1000"!==new Number(1e3).toLocaleString()?new Number(1e3).toLocaleString().charAt(1):"":i,a=void 0===a?new Number(.1).toLocaleString().charAt(1):a,t=isFinite(+t)?Math.abs(t):0;var n,l="\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4),s="\\u"+("0000"+i.charCodeAt(0).toString(16)).slice(-4),s=(e=(e+"").replace(".",a).replace(new RegExp(s,"g"),"").replace(new RegExp(l,"g"),".").replace(new RegExp("[^0-9+-Ee.]","g"),""),isFinite(+e)?+e:0),l="";return 3<(l=(t?(e=s,n=t,""+ +(Math.round(0<(""+e).indexOf("e")?e:e+"e+"+n)+"e-"+n)):""+Math.round(s)).split("."))[0].length&&(l[0]=l[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,i)),(l[1]||"").length<t&&(l[1]=l[1]||"",l[1]+=new Array(t-l[1].length+1).join("0")),l.join(a)}})(jQuery);